@page "/post/{id:int}"
@using Domain.DTOs
@using Domain.Models
@using HttpClients.ClientInterfaces
@using Microsoft.AspNetCore.Components
@inject IPostService postService
@inject NavigationManager navMgr

@if (!string.IsNullOrEmpty(msg))
{
    <div>
        <span>@msg</span>
    </div>
}

@if(post != null) {
    <div class="post">
        <div id="title">@post.Title</div>
        <div id="details">Posted on <b>@post.Created</b> by <b>@post.CreatorId</b></div>
        <div id="body">@post.Body</div>
    </div>
}



@code {
    [Parameter]
    public int Id { get; set; }

    private Post post = null!;
    private string msg = "";
    //private IEnumerable<Comment>? comments;

    protected override async Task OnInitializedAsync()
    {
        msg = "";
        try
        {
            //comments = await userService.GetUsers();
            post = await postService.GetByIdAsync(Id);
            
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
            msg = e.Message;
        }
    }
}
